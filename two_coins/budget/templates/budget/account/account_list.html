{% extends 'base.html' %}

{% block sidebar %}
    {% include 'sidebar.html' %}
{% endblock %}

{% load number_filters %}

{% block title %}2coins | {{ instance_name }}{% endblock %}

{% block custom_static %}
    {% load static %}
    <link rel="stylesheet" href="{% static 'budget/css/hover.css' %}">
{% endblock %}

{% block body %}
    <div class="w-100 vh-100">
        <div class="row m-0 vh-100 d-flex" style="padding: 20px; gap: 20px">
            <div class="d-flex h-100 flex-column align-items-center col shadow"
                 style="max-width: 520px; padding: 20px; border-radius: 20px; background-color: #FCFCFC">

                <div class="w-100 d-flex flex-wrap justify-content-between" style="gap: 20px; overflow-y: auto; scrollbar-width: none;">
                    {% for account in object_list %}
                        <div class="card"
                             style="width: 230px; height: 150px; border-radius: 16px; border: 1px solid rgba(72, 72, 72, 0.4);">
                            <a href="{% url 'account' account.id %}" class="stretched-link text-reset"
                               style="text-decoration: none;"></a>
                            <div class="card-body d-flex flex-column justify-content-between">
                                <div class="d-flex justify-content-between">
                                    <div>
                                        <h5 class="card-title mb-1">
                                            {{ account.name }}
                                        </h5>
                                        {% if account.description %}
                                            <small class="text-body-secondary">{{ account.description }}</small>
                                        {% endif %}
                                    </div>

                                    <div class="d-flex justify-content-center align-items-center rounded-3"
                                         style="width: 3rem; height: 3rem; background-color: #{{ account.style.color }}2a">
                                        <i class="{{ account.style.icon }} fa-xl"
                                           style="color: #{{ account.style.color }}"></i>
                                    </div>
                                </div>

                                <div class="d-flex align-self-end">
                                    {% if account.account_type == 's' and account.target_balance %}
                                        <h5 class="card-text">
                                            {{ account.balance|strip_trailing_zeros|int_space }}
                                        </h5>
                                        <h5>&nbsp;/&nbsp;</h5>
                                        <h5 class="card-text">
                                            {{ account.target_balance|strip_trailing_zeros|int_space }} {{ account.currency.symbol }}
                                        </h5>
                                    {% else %}
                                        <h5 class="card-text">
                                            {{ account.balance|strip_trailing_zeros|int_space }} {{ account.currency.symbol }}
                                        </h5>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    {% endfor %}

                    <div class="card hover"
                         style="width: 230px; height: 150px; border-radius: 16px; border: 1px solid rgba(72, 72, 72, 0.4);">
                        <div class="card-body d-flex justify-content-center align-items-center">
                            <a href="{% url 'account_add' %}" class="stretched-link"></a>
                            <i class="fa-solid fa-plus fa-2xl text-secondary"></i>
                        </div>
                    </div>
                </div>


            </div>

            <div class="d-flex h-100 flex-column align-items-center p-4 col shadow"
                 style="padding: 20px; border-radius: 20px; background-color: #FCFCFC"></div>
        </div>
    </div>
{% endblock %}
